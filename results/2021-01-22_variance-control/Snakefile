# ==============================================================================
# Configuration
# ==============================================================================
import pandas as pd
import os.path as path

# ==============================================================================
# Meta Rules
# ==============================================================================
rule all:
    input:
        "sleuth.transcripts.tsv",
        "sleuth.genes.tsv",
        expand(
            "Iterations/Total_{n}/balanced/{i}.{ext}",
            n=[4, 6, 8, 10, 12],
            i=range(1, 11),
            ext=["transcripts.tsv", "genes.tsv", "sleuth-object.rds"],
        ),

# ==============================================================================
# Rules
# ==============================================================================
rule sleuth:
    input:
        script = "sleuth.male-female.R",
    output:
        "sleuth.transcripts.tsv",
        "sleuth.genes.tsv",
    shell:
        "Rscript {input.script}"

rule sleuth_small_n:
    input:
        script = "sleuth.shuffle.R",
    output:
        expand(
            "Iterations/Total_{{n}}/balanced/{i}.{ext}",
            i=range(1, 11),
            ext=["transcripts.tsv", "genes.tsv", "sleuth-object.rds"],
        ),
    shell:
        "Rscript {input.script} {wildcards.n}"
