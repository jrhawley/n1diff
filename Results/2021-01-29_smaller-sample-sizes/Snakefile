# ==============================================================================
# Configuration
# ==============================================================================
import pandas as pd
import os.path as path

# ==============================================================================
# Meta Rules
# ==============================================================================
rule all:
    input:
        expand(
            "Iterations/Total_{n}/balanced/{i}.{ext}",
            n=range(4, 25, 2),
            i=range(1, 11),
            ext=["genes.tsv", "sleuth-object.rds"],
        ),
        expand(
            "Iterations/Total_{n}/unbalanced/{i}.{ext}",
            n=range(4, 25, 2),
            i=range(1, 11),
            ext=["genes.tsv", "sleuth-object.rds", "genes.jse.tsv", "jse-object.rds"],
        ),

# ==============================================================================
# Rules
# ==============================================================================
rule sleuth_small_n:
    input:
        script = "sleuth.shuffle.R",
    output:
        expand(
            "Iterations/Total_{{n}}/balanced/{i}.{file}",
            i=range(1, 11),
            file=["genes.tsv", "sleuth-object.rds"],
        ),
        expand(
            "Iterations/Total_{{n}}/unbalanced/{i}.{file}",
            i=range(1, 11),
            file=["genes.tsv", "sleuth-object.rds"],
        ),
        expand(
            "Iterations/Total_{{n}}/unbalanced/{i}.{file}",
            i=range(1, 11),
            file=["genes.jse.tsv", "jse-object.rds"],
        ),
    shell:
        "Rscript {input.script} {wildcards.n}"
